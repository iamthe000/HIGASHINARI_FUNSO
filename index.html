<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>大豊中皇国：東成紛争/東成独立戦争</title>
    <style>
        :root {
            --primary-color: #002f58ff; /* 豊中ブルー */
            --accent-color: #d4af37; /* 皇国の威光（金） */
            --danger-color: #ff3333;
            --text-color: #e0e0e0;
            --bg-color: #121212;
            --panel-bg: rgba(0, 20, 40, 0.95);
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-image: url('bg_capital.PNG');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        #game-container {
            width: 900px;
            max-width: 95%;
            background: var(--panel-bg);
            border: 2px solid var(--primary-color);
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.8);
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* パラメータ表示 */
        #status-bar {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            padding: 15px;
            background: linear-gradient(to bottom, rgba(0,0,0,0.9), rgba(0,0,0,0.7));
            border-bottom: 3px solid var(--primary-color);
            font-weight: bold;
            font-size: 0.9em;
        }

        .stat-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .stat-label { font-size: 0.8em; color: #888; }
        .stat-value { color: var(--accent-color); font-size: 1.4em; font-family: monospace; }
        .danger { color: var(--danger-color); animation: pulse 1s infinite; }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        /* 画像エリア */
        #scene-image {
            width: 100%;
            height: 320px;
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            border-bottom: 1px solid #444;
            position: relative;
        }

        #scene-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.5s ease;
        }

        .rebel-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 0, 0, 0.6);
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8em;
            color: white;
            border: 1px solid #ff9999;
        }
        
        /* テキストエリア */
        #text-area {
            padding: 25px;
            min-height: 140px;
            font-size: 1.1em;
            line-height: 1.8;
            background: rgba(0, 0, 0, 0.3);
            border-bottom: 1px solid #333;
        }

        /* 選択肢エリア */
        #choices-area {
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            background: rgba(0, 15, 30, 0.5);
        }

        .choice-btn {
            background: linear-gradient(90deg, #001f3f, #003366);
            color: #fff;
            border: 1px solid #4da6ff;
            padding: 16px 20px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1em;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
        }

        .choice-btn:hover {
            background: linear-gradient(90deg, #003366, #005080);
            transform: translateX(4px);
            box-shadow: 0 0 15px rgba(77, 166, 255, 0.3);
        }

        .choice-btn:disabled {
            background: #333;
            color: #666;
            border-color: #444;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .choice-btn::before {
            content: "▶";
            margin-right: 10px;
            color: var(--accent-color);
        }

        .choice-cost {
            float: right;
            font-size: 0.85em;
            color: #ffaaaa;
        }

        .placeholder {
            color: #555;
            font-family: monospace;
            border: 2px dashed #444;
            padding: 20px;
            text-align: center;
        }

        /* ゲームオーバーなどのオーバーレイ演出 */
        #overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 0, 0, 0.2);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.5s;
            z-index: 10;
        }
    </style>
</head>
<body>

<div id="game-container">
    <div id="overlay"></div>
    <div id="status-bar">
        <div class="stat-box">
            <span class="stat-label">国家予算</span>
            <span id="money-val" class="stat-value">60</span>
        </div>
        <div class="stat-box">
            <span class="stat-label">軍事力</span>
            <span id="army-val" class="stat-value">50</span>
        </div>
        <div class="stat-box">
            <span class="stat-label">北摂支持率</span>
            <span id="support-val" class="stat-value">50</span>
        </div>
    </div>

    <div id="scene-image">
        <div class="placeholder">Loading...</div>
        <div class="rebel-indicator">敵勢力: <span id="rebel-val">Unknown</span></div>
    </div>

    <div id="text-area">
        <p id="story-text">システム起動中...</p>
    </div>

    <div id="choices-area">
    </div>
</div>

<script>
    /* * ゲームの状態管理
     * Hardcore調整：初期値を下げ、敵勢力を強めに設定
     */
    const initialGameState = {
        money: 70,      // 初期予算（やや少なめ）
        army: 50,       // 初期軍事（心もとない）
        support: 60,    // 初期支持（プライド高い北摂市民）
        rebelPower: 40, // 敵の強さ。これが80を超えると手がつけられなくなる
        turn: 0,
        currentScene: 'intro'
    };

    let gameState = { ...initialGameState };

    /*
     * シナリオデータ
     */
    const scenes = {
        // ■ オープニング
        'intro': {
            text: "西暦20XX年。大豊中皇国は「東成独立戦争」の泥沼にいた。<br>ものづくりの街・東成区は、その高い技術力を軍事転用し、頑強な抵抗を続けている。<br>長引く紛争に北摂市民の不満は限界に近い。<br><br>元首よ、冷徹な判断を下せ。<br><strong style='color:red;'>※警告：予算・軍事・支持率のいずれかが0になると国家は崩壊する。</strong>",
            image: "bg_capital.PNG",
            choices: [
                {
                    text: "状況を開始する",
                    next: 'scene_1',
                    effect: () => {}
                }
            ]
        },

        // ■ 第1章：開戦の狼煙
        'scene_1': {
            text: "東成区境の今里ロータリーにて、皇国軍の先遣隊がバリケードに接触。<br>敵は工場用クレーンを改造した重機で道を塞いでいる。<br>初期対応はどうするか？",
            image: "bg_war_room.JPG",
            choices: [
                {
                    text: "マチカネ機甲師団で強行突破",
                    costText: "武力-15, 資金-10",
                    next: 'branch_fight_1',
                    condition: (s) => s.army >= 15 && s.money >= 10,
                    effect: (s) => { s.army -= 15; s.money -= 10; s.rebelPower -= 5; }
                },
                {
                    text: "裏ルートで敵幹部と接触を図る",
                    costText: "資金-20, 支持-5",
                    next: 'branch_bribe_1',
                    condition: (s) => s.money >= 20,
                    effect: (s) => { s.money -= 20; s.support -= 5; s.rebelPower -= 10; }
                },
                {
                    text: "阪大AI研究所によるサイバー攻撃",
                    costText: "資金-15, 武力-5",
                    next: 'branch_intel_1',
                    condition: (s) => s.money >= 15,
                    effect: (s) => { s.money -= 15; s.army -= 5; s.rebelPower += 5; /* 敵解析中に時間が過ぎる */ }
                }
            ]
        },

        // ----------------------------------------------------
        // ルートA：武力鎮圧（軍事リソースの枯渇リスク）
        // ----------------------------------------------------
        'branch_fight_1': {
            text: "機甲師団が進軍するも、町工場から発射された「即席コイルガン」により先頭車両が大破！<br>敵の技術力は予想を遥かに超えている。<br>通常の鎮圧では被害が拡大する一方だ。",
            image: "event_railgun.jpg", // 【新規】
            choices: [
                {
                    text: "箕面山岳警備隊（特殊部隊）を投入",
                    costText: "武力-25, 資金-5",
                    next: 'scene_fight_2',
                    condition: (s) => s.army >= 25,
                    effect: (s) => { s.army -= 25; s.money -= 5; s.rebelPower -= 20; }
                },
                {
                    text: "伊丹基地からの無差別爆撃",
                    costText: "資金-20, 支持-25",
                    next: 'scene_air_raid',
                    condition: (s) => s.money >= 20,
                    effect: (s) => { s.money -= 20; s.support -= 25; s.rebelPower -= 40; }
                }
            ]
        },

        'scene_fight_2': {
            text: "特殊部隊の活躍により敵前線は崩壊したが、彼らは地下鉄網（旧・中央線）を使って後退。<br>深江橋周辺の地下要塞に立てこもったようだ。<br>追い詰めるには危険が伴う。",
            image: "event_attack.PNG",
            choices: [
                {
                    text: "地下への毒ガス注入（国際条約違反）",
                    costText: "支持-40, 敵壊滅",
                    next: 'scene_climax_check',
                    condition: (s) => true,
                    effect: (s) => { s.support -= 40; s.rebelPower = 0; }
                },
                {
                    text: "入口をコンクリで封鎖し兵糧攻め",
                    costText: "資金-15, 敵強化",
                    next: 'scene_siege_wait',
                    condition: (s) => s.money >= 15,
                    effect: (s) => { s.money -= 15; s.rebelPower += 20; }
                }
            ]
        },

        'scene_air_raid': {
            text: "爆撃は成功したが、東成区は火の海と化した。<br>SNSでは「豊中の虐殺」として炎上しており、国際社会（主に京都・神戸）からの制裁がちらついている。",
            image: "event_fire.jpg", 
            choices: [
                {
                    text: "京都に賄賂を送り黙らせる",
                    costText: "資金-30",
                    next: 'scene_climax_check',
                    condition: (s) => s.money >= 30,
                    effect: (s) => { s.money -= 30; }
                },
                {
                    text: "無視して進軍（制裁発動）",
                    costText: "資金-20, 支持-10",
                    next: 'scene_climax_check',
                    condition: (s) => true,
                    effect: (s) => { s.money -= 20; s.support -= 10; s.rebelPower -= 10; }
                }
            ]
        },

        // ----------------------------------------------------
        // ルートB：買収・外交（資金リソースの枯渇リスク）
        // ----------------------------------------------------
        'branch_bribe_1': {
            text: "鶴橋の闇市を通じて接触に成功。<br>しかし、彼らのバックには「南の大国・堺」がついている可能性がある。<br>要求額は法外だ。",
            image: "event_blackmarket.jpg", // 【新規】
            choices: [
                {
                    text: "要求通りに追加資金を支払う",
                    costText: "資金-40",
                    next: 'scene_bribe_2',
                    condition: (s) => s.money >= 40,
                    effect: (s) => { s.money -= 40; s.rebelPower -= 10; }
                },
                {
                    text: "交渉の場で西成傭兵団を雇い急襲",
                    costText: "資金-15, 武力-10",
                    next: 'scene_mercenary_gamble',
                    condition: (s) => s.money >= 15 && s.army >= 10,
                    effect: (s) => { s.money -= 15; s.army -= 10; }
                }
            ]
        },

        'scene_bribe_2': {
            text: "金を受け取ったはずの敵幹部だが、なんとその金で新型兵器を購入したとの情報が入った！<br>完全に舐められている。<br>支持率も「弱腰外交」と批判され急落中だ。",
            image: "event_revolt.JPG",
            choices: [
                {
                    text: "徹底抗戦に切り替える",
                    costText: "武力-20, 支持-10",
                    next: 'scene_climax_check',
                    condition: (s) => s.army >= 20,
                    effect: (s) => { s.army -= 20; s.support -= 10; s.rebelPower -= 10; }
                },
                {
                    text: "プライドを捨てて停戦を乞う",
                    costText: "支持-30, 資金-10",
                    next: 'end_humiliation',
                    condition: (s) => true,
                    effect: (s) => { s.support -= 30; s.money -= 10; }
                }
            ]
        },

        'scene_mercenary_gamble': {
            isLogic: true,
            handler: (s) => {
                // 西成傭兵団は気まぐれ。資金が多いと成功率アップ
                const successChance = s.money > 30 ? 0.7 : 0.4;
                if (Math.random() < successChance) {
                    s.rebelPower = 0; 
                    return 'end_good_assassin';
                } else {
                    s.money -= 20; // 持ち逃げされる
                    s.rebelPower += 30; // 敵激怒
                    return 'scene_mercenary_fail';
                }
            }
        },

        'scene_mercenary_fail': {
            text: "最悪だ！ 傭兵団は我々の前金を待ち逃げし、逆にこちらの情報を敵に売った。<br>敵は我々の補給路を完全に把握し、逆侵攻を開始している。",
            image: "event_nishinari_merc.jpg", // 【新規】
            choices: [
                { text: "最後の防衛戦へ...", next: 'scene_climax_check', effect: () => {} }
            ]
        },


        // ----------------------------------------------------
        // ルートC：諜報・サイバー（支持率と時間の勝負）
        // ----------------------------------------------------
        'branch_intel_1': {
            text: "阪大AIの解析により、敵の指揮系統がデジタル化されていることが判明。<br>「深江橋サーバー」をダウンさせれば無力化できるが、敵も優秀なハッカーを雇っている。",
            image: "event_cyber.jpg", // 【新規】
            choices: [
                {
                    text: "インフラ全停止攻撃（市民生活に影響）",
                    costText: "資金-10, 支持-20",
                    next: 'scene_intel_2',
                    condition: (s) => s.money >= 10,
                    effect: (s) => { s.money -= 10; s.support -= 20; s.rebelPower -= 20; }
                },
                {
                    text: "フェイクニュース拡散で内部崩壊を狙う",
                    costText: "資金-5, 成功率中",
                    next: 'scene_fake_news_gamble',
                    condition: (s) => s.money >= 5,
                    effect: (s) => { s.money -= 5; }
                }
            ]
        },

        'scene_intel_2': {
            text: "東成区の電力・通信を遮断。敵の重機はただの鉄屑となった。<br>しかし、病院等のライフラインも止まり、人道的な非難が殺到。<br>デモ隊が豊中市役所を取り囲んでいる。",
            image: "event_revolt.JPG",
            choices: [
                {
                    text: "デモ隊を武力鎮圧し、東成へ進軍",
                    costText: "武力-15, 支持-20",
                    next: 'scene_climax_check',
                    condition: (s) => s.army >= 15,
                    effect: (s) => { s.army -= 15; s.support -= 20; s.rebelPower -= 30; }
                },
                {
                    text: "責任者を更迭し、事態収拾を図る",
                    costText: "武力-10",
                    next: 'scene_climax_check',
                    condition: (s) => true,
                    effect: (s) => { s.army -= 10; s.rebelPower -= 10; } // あまり効果がない
                }
            ]
        },

        'scene_fake_news_gamble': {
            isLogic: true,
            handler: (s) => {
                if (Math.random() > 0.5) {
                    s.rebelPower -= 40;
                    return 'scene_fake_news_success';
                } else {
                    s.support -= 30; // 嘘がバレた
                    s.rebelPower += 10;
                    return 'scene_fake_news_fail';
                }
            }
        },

        'scene_fake_news_success': {
            text: "「反乱軍リーダーが資金を持ち逃げした」というデマが浸透。<br>敵組織は疑心暗鬼になり、仲間割れを始めている。<br>今が好機だ。",
            image: "event_spy.jpg",
            choices: [
                { text: "混乱に乗じて制圧する", next: 'scene_climax_check', effect: (s) => { s.army -= 5; } }
            ]
        },
        
        'scene_fake_news_fail': {
            text: "工作は失敗した。逆に「豊中政府の卑劣な嘘」としてプロパガンダに使われている。<br>北摂市民の中にも反乱への同情論が広まってしまった。",
            image: "event_diplomacy.jpg",
            choices: [
                { text: "挽回不能か...", next: 'scene_climax_check', effect: (s) => { s.rebelPower += 20; } }
            ]
        },
        
        'scene_siege_wait': {
            text: "兵糧攻めを続けている間に、敵は地下トンネルを通じて大阪市内から補給を受けていた！<br>時間が敵に味方したようだ。勢力を増した敵が地上に出てきた。",
            image: "event_attack.PNG",
            choices: [
                { text: "迎撃するしかない", next: 'scene_climax_check', effect: (s) => { s.army -= 10; } }
            ]
        },


        // ----------------------------------------------------
        // クライマックス判定ロジック
        // ----------------------------------------------------
        'scene_climax_check': {
            isLogic: true,
            handler: (s) => {
                // 総合力 = (資金 + 武力 + 支持率) 
                // ただし、どれか一つでも極端に低いと足を引っ張る
                const totalPower = s.money + s.army + s.support;
                
                // 敵勢力が強大化しすぎている場合
                if (s.rebelPower >= 80) {
                    return 'end_bad_overwhelmed';
                }
                
                // リソース不足での敗北
                if (totalPower < 60) {
                    return 'end_bad_defeat';
                }

                // 勝利判定：敵の戦力を上回っているか
                // 敵戦力補正: 敵戦力 * 3 と プレイヤー総合力 の比較
                if (totalPower > (s.rebelPower * 3) + 50) {
                    return 'end_true_victory';
                } else if (totalPower > (s.rebelPower * 3)) {
                    return 'end_normal_victory';
                } else {
                    return 'end_bad_defeat';
                }
            }
        },

        // ----------------------------------------------------
        // エンディング集
        // ----------------------------------------------------
        'end_true_victory': {
            text: "【完全勝利：大豊中の栄光】<br>完璧な作戦指揮により、東成反乱軍は無条件降伏しました。<br>接収した東成の工場群は皇国の産業を支え、北摂の覇権は揺るぎないものとなりました。<br>あなたの銅像が豊中駅前に建立されます。",
            image: "end_success.jpeg",
            choices: [{ text: "最初に戻る", next: 'intro', effect: (s) => resetGame(s) }]
        },
        'end_normal_victory': {
            text: "【辛勝：傷だらけの平和】<br>なんとか反乱を鎮圧しましたが、皇国のリソースは枯渇寸前です。<br>復興には長い年月がかかるでしょう。<br>市民の目は冷たく、次の選挙での勝利は絶望的です。",
            image: "end_success.jpeg",
            choices: [{ text: "最初に戻る", next: 'intro', effect: (s) => resetGame(s) }]
        },
        'end_good_assassin': {
            text: "【裏工作勝利：闇の支配者】<br>表立った戦闘を避け、敵の中枢のみを排除しました。<br>東成区は傀儡政権によって統治されます。<br>あなたは「沈黙の元首」として恐れられるようになりました。",
            image: "event_diplomacy.jpg",
            choices: [{ text: "最初に戻る", next: 'intro', effect: (s) => resetGame(s) }]
        },
        'end_humiliation': {
            text: "【屈辱的講和】<br>東成区の独立を認め、賠償金を支払うことで合意しました。<br>大豊中皇国の威信は地に落ち、周辺地域も次々と離反を宣言。<br>あなたは責任を問われ失脚しました。",
            image: "end_fail.jpeg",
            choices: [{ text: "最初に戻る", next: 'intro', effect: (s) => resetGame(s) }]
        },
        'end_bad_overwhelmed': {
            text: "【敗北：大阪大戦争へ】<br>対応の遅れにより反乱軍は強大化。「東大阪連合」「八尾空軍」までもが合流し、巨大勢力となりました。<br>もはや一自治体の手には負えません。<br>豊中市街地への砲撃が始まりました。",
            image: "end_fail.jpeg",
            choices: [{ text: "最初に戻る", next: 'intro', effect: (s) => resetGame(s) }]
        },
        'end_bad_defeat': {
            text: "【敗北：亡命】<br>最終防衛ラインが突破されました。<br>リソース配分のミスが命取りでした。<br>あなたは伊丹空港から国外（兵庫県）へ亡命します...",
            image: "end_exile.jpg", // 【新規】
            choices: [{ text: "最初に戻る", next: 'intro', effect: (s) => resetGame(s) }]
        },
        
        'game_over_resource': {
            text: "【国家崩壊】<br>必要なリソースが尽き、組織を維持することができません。<br>大豊中皇国は内部から崩壊しました。<br>（資金・武力・支持率のいずれかが0になりました）",
            image: "end_fail.jpeg",
            choices: [{ text: "最初に戻る", next: 'intro', effect: (s) => resetGame(s) }]
        }
    };

    /*
     * システム関数
     */

    function resetGame(s) {
        Object.assign(s, initialGameState);
        document.getElementById('overlay').style.opacity = 0;
    }

    function checkGameOver() {
        if (gameState.money <= 0 || gameState.army <= 0 || gameState.support <= 0) {
            return true;
        }
        return false;
    }

    function updateScreen() {
        // 値の更新
        const moneyEl = document.getElementById('money-val');
        const armyEl = document.getElementById('army-val');
        const supportEl = document.getElementById('support-val');
        const rebelEl = document.getElementById('rebel-val');

        moneyEl.textContent = gameState.money;
        armyEl.textContent = gameState.army;
        supportEl.textContent = gameState.support;
        
        // 敵勢力のヒント表示（完全には見せない）
        let rebelText = "低い";
        if (gameState.rebelPower > 30) rebelText = "警戒";
        if (gameState.rebelPower > 50) rebelText = "高い";
        if (gameState.rebelPower > 70) rebelText = "極大";
        rebelEl.textContent = rebelText;
        if (gameState.rebelPower > 70) rebelEl.parentElement.style.backgroundColor = "rgba(255,0,0,0.9)";
        else rebelEl.parentElement.style.backgroundColor = "rgba(255,0,0,0.6)";

        // ピンチ演出
        moneyEl.className = gameState.money <= 20 ? 'stat-value danger' : 'stat-value';
        armyEl.className = gameState.army <= 20 ? 'stat-value danger' : 'stat-value';
        supportEl.className = gameState.support <= 20 ? 'stat-value danger' : 'stat-value';

        // ゲームオーバー割り込み判定
        if (!gameState.currentScene.startsWith('end_') && gameState.currentScene !== 'game_over_resource') {
             if (checkGameOver()) {
                gameState.currentScene = 'game_over_resource';
                document.getElementById('overlay').style.opacity = 1; 
             }
        }

        const sceneData = scenes[gameState.currentScene];

        // ロジックシーン処理
        if (sceneData.isLogic) {
            const nextSceneId = sceneData.handler(gameState);
            gameState.currentScene = nextSceneId;
            updateScreen(); 
            return;
        }

        // 画像更新
        const imgContainer = document.getElementById('scene-image');
        // 画像要素以外のオーバーレイを残すため、imgタグのみ操作
        let img = imgContainer.querySelector('img');
        let placeholder = imgContainer.querySelector('.placeholder');
        
        if (sceneData.image) {
            if (!img) {
                img = document.createElement('img');
                imgContainer.appendChild(img);
            }
            img.style.display = 'block';
            img.src = sceneData.image;
            if(placeholder) placeholder.style.display = 'none';
            
            img.onerror = function() {
                this.style.display = 'none';
                if(placeholder) {
                    placeholder.style.display = 'block';
                    placeholder.textContent = `NO IMAGE: ${sceneData.image}`;
                }
            };
        } else {
            if(img) img.style.display = 'none';
            if(placeholder) placeholder.style.display = 'block';
        }

        // テキスト更新
        document.getElementById('story-text').innerHTML = sceneData.text;

        // 選択肢更新
        const choicesContainer = document.getElementById('choices-area');
        choicesContainer.innerHTML = '';

        sceneData.choices.forEach(choice => {
            const btn = document.createElement('button');
            btn.className = 'choice-btn';
            
            // コスト表示
            let html = choice.text;
            if (choice.costText) {
                html += `<span class="choice-cost">(${choice.costText})</span>`;
            }
            btn.innerHTML = html;

            // 条件判定（リソース不足なら無効化するか、あるいは押してゲームオーバーにするか）
            // Hardcoreなら「押せるが死ぬ」方が面白いが、親切設計にするならdisabled
            // 今回は「押せるが死ぬ」ではなく、そもそも選択できない（disabled）にして詰みを悟らせる
            if (choice.condition && !choice.condition(gameState)) {
                btn.disabled = true;
                btn.innerHTML += " <span style='color:red;'>[不足]</span>";
            }

            btn.onclick = () => {
                if (choice.effect) choice.effect(gameState);
                gameState.currentScene = choice.next;
                updateScreen();
            };
            choicesContainer.appendChild(btn);
        });
    }

    // 開始
    updateScreen();

</script>
</body>
</html>
